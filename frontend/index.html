<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Mooff Ledger PRO (cloud demo)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-mark">M</div>
      <div class="logo-text">
        <div class="logo-name">Mooff</div>
        <div class="logo-sub">Ledger PRO</div>
      </div>
    </div>
    <nav>
      <button class="nav-btn active" data-view="investments">Inwestycje</button>
      <button class="nav-btn" data-view="settings">Ustawienia (lokalne)</button>
    </nav>
    <div class="sidebar-footer">
      <span class="badge">Cloud demo</span>
    </div>
  </aside>

  <main class="main">
    <header class="topbar">
      <h1>Mooff Ledger PRO</h1>
      <div class="topbar-right">
        <span class="env-label">API: <span id="apiBaseDisplay"></span></span>
      </div>
    </header>

    <section id="view-investments" class="view active">
      <div class="panels">
        <div class="panel">
          <h2>Nowa inwestycja</h2>
          <label>
            Nazwa inwestycji
            <input type="text" id="invName" placeholder="np. Merkurego">
          </label>
          <label>
            Dawca (pożyczkodawca)
            <input type="text" id="invLender" placeholder="np. Tabapol">
          </label>
          <label>
            Odbiorca
            <input type="text" id="invBorrower" placeholder="np. Z1 POINT sp. z o.o.">
          </label>
          <label>
            Stopa roczna % (stała dla inwestycji)
            <input type="number" id="invRate" value="9.5" step="0.01">
          </label>
          <button id="addInvestmentBtn" class="primary">Dodaj inwestycję</button>
        </div>

        <div class="panel">
          <h2>Lista inwestycji</h2>
          <table id="investmentsTable">
            <thead>
              <tr>
                <th>Nazwa</th>
                <th>Dawca → Odbiorca</th>
                <th>Stopa %</th>
                <th>Status</th>
                <th>Akcje</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </div>

      <div id="investmentDetails" class="panel investment-details hidden">
        <div class="details-header">
          <div>
            <h2 id="invDetailsName">Inwestycja</h2>
            <div class="small" id="invDetailsParties"></div>
          </div>
          <div class="details-actions">
            <button id="refreshDetailsBtn">Odśwież</button>
            <button id="deleteInvestmentBtn" class="danger">Usuń inwestycję</button>
          </div>
        </div>

        <div class="details-grid">
          <div class="subpanel">
            <h3>Nowa operacja</h3>
            <label>
              Data
              <input type="date" id="opDate">
            </label>
            <label>
              Typ
              <select id="opType">
                <option value="Wplata">Wpłata (transza)</option>
                <option value="Splata">Spłata</option>
              </select>
            </label>
            <label>
              Kwota (PLN)
              <input type="number" id="opAmount" step="0.01">
            </label>
            <label>
              Tryb stopy
              <select id="opRateMode">
                <option value="global">Stała z inwestycji</option>
                <option value="custom">Własna stopa dla tej operacji</option>
              </select>
            </label>
            <label id="customRateLabel" style="display:none;">
              Własna stopa roczna % (dla tej operacji)
              <input type="number" id="opCustomRate" step="0.01">
            </label>
            <label>
              Opis
              <input type="text" id="opNote">
            </label>
            <button id="opMainButton" class="primary">Dodaj operację</button>
            <button id="cancelEditBtn" class="danger" style="display:none;">Anuluj edycję</button>
          </div>

          <div class="subpanel">
            <h3>Podsumowanie</h3>
            <div id="summaryBox" class="summary-box">
              Brak danych.
            </div>
          </div>
        </div>

        <div class="subpanel">
          <h3>Operacje</h3>
          <table id="opsTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Data</th>
                <th>Typ</th>
                <th>Kwota</th>
                <th>Saldo przed</th>
                <th>Dni</th>
                <th>Stopa %</th>
                <th>Odsetki</th>
                <th>Saldo po</th>
                <th>Opis</th>
                <th>Akcje</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

      </div>
    </section>

    <section id="view-settings" class="view">
      <div class="panel">
        <h2>Ustawienia lokalne (frontend)</h2>
        <label>
          Adres API (backend Mooff Ledger PRO)
          <input type="text" id="apiBaseInput" placeholder="http://localhost:4000">
        </label>
        <button id="saveApiBaseBtn" class="primary">Zapisz</button>
        <p class="small">
          Domyślnie: <code>http://localhost:4000</code>
        </p>
      </div>
    </section>

  </main>
</div>

<script src="app.js"></script>
</body>
</html>
